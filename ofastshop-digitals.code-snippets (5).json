{"generator":"Code Snippets v3.8.2","date_created":"2025-12-05 19:29","snippets":[{"id":9,"name":"Convert Uploaded Images to WebP Format","desc":"<p>This snippet converts uploaded images (JPEG, PNG, GIF) to WebP format automatically in WordPress. Ideal for use in a theme's functions.php file, or with plugins like Code Snippets or WPCodeBox.<\/p>","code":"\/**\n * Convert Uploaded Images to WebP Format\n *\n * This snippet converts uploaded images (JPEG, PNG, GIF) to WebP format\n * automatically in WordPress. Ideal for use in a theme's functions.php file,\n * or with plugins like Code Snippets or WPCodeBox.\n * \n * @package    WordPress_Custom_Functions\n * @autor      Mark Harris\n * @link       www.christchurchwebsolutions.co.uk\n *\n * Usage Instructions:\n * - Add this snippet to your theme's functions.php file, or add it as a new\n *   snippet in Code Snippets or WPCodeBox.\n * - The snippet hooks into WordPress's image upload process and converts\n *   uploaded images to the WebP format.\n *\n * Optional Configuration:\n * - By default, the original image file is deleted after conversion to WebP.\n *   If you prefer to keep the original image file, simply comment out or remove\n *   the line '@unlink( $file_path );' in the wpturbo_handle_upload_convert_to_webp function.\n *   This will preserve the original uploaded image file alongside the WebP version.\n *\/\n\nadd_filter('wp_handle_upload', 'wpturbo_handle_upload_convert_to_webp');\n\nfunction wpturbo_handle_upload_convert_to_webp($upload) {\n    if ($upload['type'] == 'image\/jpeg' || $upload['type'] == 'image\/png' || $upload['type'] == 'image\/gif') {\n        $file_path = $upload['file'];\n\n        \/\/ Check if ImageMagick or GD is available\n        if (extension_loaded('imagick') || extension_loaded('gd')) {\n            $image_editor = wp_get_image_editor($file_path);\n            if (!is_wp_error($image_editor)) {\n                $file_info = pathinfo($file_path);\n                $dirname   = $file_info['dirname'];\n                $filename  = $file_info['filename'];\n\n                \/\/ Create a unique file path for the WebP image\n                $def_filename = wp_unique_filename($dirname, $filename . '.webp');\n                $new_file_path = $dirname . '\/' . $def_filename;\n\n                \/\/ Attempt to save the image in WebP format\n                $saved_image = $image_editor->save($new_file_path, 'image\/webp');\n                if (!is_wp_error($saved_image) && file_exists($saved_image['path'])) {\n                    \/\/ Success: replace the uploaded image with the WebP image\n                    $upload['file'] = $saved_image['path'];\n                    $upload['url']  = str_replace(basename($upload['url']), basename($saved_image['path']), $upload['url']);\n                    $upload['type'] = 'image\/webp';\n\n                    \/\/ Optionally remove the original image\n                    @unlink($file_path);\n                }\n            }\n        }\n    }\n\n    return $upload;\n}","active":true,"modified":"2024-10-11 10:58:42","revision":"3"},{"id":20,"name":"Remove Zoom image","desc":"<p>this section remove the zoom effect on the WooCommerce product display image<\/p>","code":"\/\/ Remove WooCommerce Zoom Effect\nfunction disable_woocommerce_zoom() {\n    remove_theme_support( 'wc-product-gallery-zoom' );\n}\nadd_action( 'after_setup_theme', 'disable_woocommerce_zoom', 100 );","tags":["display","image"],"active":true,"modified":"2024-11-11 11:27:49","revision":"6"},{"id":49,"name":"Dokan Marquee Text ","desc":"<p>This displays information for vendors in vendor dokan dashboard<\/p>","code":"function add_marquee_to_dokan_dashboard() {\n    if (dokan_is_seller_dashboard()) { \n        echo '<style>\n                .dokan-marquee {\n                    background: #ffcc00;\n                    color: #000;\n                    padding: 10px;\n                    font-size: 16px;\n                    font-weight: bold;\n                    text-align: center;\n                    white-space: nowrap;\n                    overflow: hidden;\n                    display: block;\n                }\n            <\/style>';\n        echo '<marquee class=\"dokan-marquee\">\ud83d\ude80 Important Announcement: Upgrade to Premium for more features! \ud83d\ude80<\/marquee>';\n    }\n}\nadd_action('dokan_dashboard_content_before', 'add_marquee_to_dokan_dashboard');","active":true,"modified":"2025-05-02 15:31:03","revision":"11"},{"id":67,"name":"Add the Sold Column to Products in the Wordpress Dashboard","desc":"<p>This enable sold item colum in product page\u00a0<\/p>","code":"\/\/ Add Sold column to Products table\nadd_filter('manage_edit-product_columns', 'add_sold_column_to_product_table');\nfunction add_sold_column_to_product_table($columns) {\n    $columns['product_sold'] = __('Sold', 'text-domain');\n    return $columns;\n}\n\n\/\/ Make Sold column sortable\nadd_filter('manage_edit-product_sortable_columns', 'make_sold_column_sortable_in_product_table');\nfunction make_sold_column_sortable_in_product_table($columns) {\n    $columns['product_sold'] = 'product_sold';\n    return $columns;\n}\n\n\/\/ Populate Sold column with number of units sold\nadd_action('manage_product_posts_custom_column', 'populate_sold_column_in_product_table', 10, 2);\nfunction populate_sold_column_in_product_table($column, $post_id) {\n    if ($column === 'product_sold') {\n        $product = wc_get_product($post_id);\n        if ($product->is_type('simple')) {\n            $units_sold = get_post_meta($post_id, 'total_sales', true);\n            echo $units_sold;\n        } else {\n            echo '-';\n        }\n    }\n}\n\n\/\/ Define custom sorting for Sold column\nadd_action('pre_get_posts', 'custom_sorting_for_sold_column');\nfunction custom_sorting_for_sold_column($query) {\n    global $pagenow;\n    $orderby = $query->get('orderby');\n    if ($pagenow === 'edit.php' && $orderby === 'product_sold') {\n        $query->set('meta_key', 'total_sales');\n        $query->set('orderby', 'meta_value_num');\n    }\n}","modified":"2025-05-01 03:15:03","revision":"3"},{"id":69,"name":"featured-image-quick-edit","code":"\/\/ Add Featured Image Column\n\/\/ Add Featured Image Column for All Post Types\nadd_filter('manage_posts_columns', function ($columns) {\n    $columns['featured_image'] = __('Featured Image');\n    return $columns;\n});\n\nadd_filter('manage_edit-post_columns', function ($columns) {\n    $columns['featured_image'] = __('Featured Image');\n    return $columns;\n});\n\nadd_filter('manage_edit-{post_type}_columns', function ($columns) {\n    $columns['featured_image'] = __('Featured Image');\n    return $columns;\n}, 10, 2);\n\n\/\/ Display Featured Image in the Column for All Post Types\nadd_action('manage_posts_custom_column', function ($column, $post_id) {\n    if ($column === 'featured_image') {\n        echo get_the_post_thumbnail($post_id, [50, 50]) ?: __('No Image');\n    }\n}, 10, 2);\n\nadd_action('manage_{post_type}_custom_column', function ($column, $post_id) {\n    if ($column === 'featured_image') {\n        echo get_the_post_thumbnail($post_id, [50, 50]) ?: __('No Image');\n    }\n}, 10, 2);\n\n\/\/ Add Featured Image Field to Quick Edit for All Post Types\nadd_action('quick_edit_custom_box', function ($column_name, $post_type) {\n    if ($column_name === 'featured_image') {\n        ?>\n        <fieldset class=\"inline-edit-col-left\">\n            <div class=\"inline-edit-col\">\n                <label>\n                    <span class=\"title\"><?php _e('Featured Image'); ?><\/span>\n                    <input type=\"hidden\" name=\"featured_image_id\" class=\"featured_image_id\" value=\"\">\n                    <button type=\"button\" class=\"button set-featured-image\"><?php _e('Set Image'); ?><\/button>\n                    <div class=\"featured-image-preview\" style=\"margin-top: 10px;\"><\/div>\n                <\/label>\n            <\/div>\n        <\/fieldset>\n        <?php\n    }\n}, 10, 2);\n\n\/\/ Save Featured Image on Quick Edit Save\nadd_action('save_post', function ($post_id) {\n    if (isset($_POST['featured_image_id']) && current_user_can('edit_post', $post_id)) {\n        $featured_image_id = absint($_POST['featured_image_id']);\n        if ($featured_image_id) {\n            set_post_thumbnail($post_id, $featured_image_id);\n        } else {\n            delete_post_thumbnail($post_id);\n        }\n    }\n});\n\n\/\/ Enqueue Media and Inline Script for Quick Edit\nadd_action('admin_enqueue_scripts', function ($hook) {\n    if ($hook === 'edit.php') {\n        wp_enqueue_media(); \/\/ Enable WordPress Media Uploader\n        wp_add_inline_script('jquery', '\n            jQuery(document).ready(function ($) {\n                \/\/ Open Media Uploader\n                $(document).on(\"click\", \".set-featured-image\", function () {\n                    var frame = wp.media({\n                        title: \"Set Featured Image\",\n                        button: { text: \"Set Image\" },\n                        multiple: false\n                    });\n\n                    var $button = $(this);\n                    frame.on(\"select\", function () {\n                        var attachment = frame.state().get(\"selection\").first().toJSON();\n                        $button.siblings(\".featured_image_id\").val(attachment.id);\n                        $button.siblings(\".featured-image-preview\").html(\"<img src=\\'\" + attachment.sizes.thumbnail.url + \"\\' style=\\'max-width: 100%; height: auto;\\' \/>\");\n                    });\n\n                    frame.open();\n                });\n\n                \/\/ Pre-fill Quick Edit\n                $(document).on(\"click\", \".editinline\", function () {\n                    var $row = $(this).closest(\"tr\");\n                    var featuredImageId = $row.find(\".featured_image img\").data(\"id\");\n                    var $quickEditRow = $(\"#the-list\").siblings(\"#inline-edit\");\n\n                    $quickEditRow.find(\".featured_image_id\").val(featuredImageId);\n                    $quickEditRow.find(\".featured-image-preview\").html($row.find(\".featured_image img\").clone());\n                });\n            });\n        ');\n    }\n});","modified":"2025-05-01 04:09:17","revision":"4"},{"id":71,"name":"Page Categories","desc":"<p>This code added categories to pages<\/p>","code":"add_action('init', 'add_categories_to_pages');\n\n\/*\n * Add CATEGORIES to pages\n *\/\nfunction add_categories_to_pages() {\n    register_taxonomy_for_object_type('category', 'page');\n}","tags":["pages","category"],"active":true,"modified":"2025-05-01 22:58:00","revision":"6"},{"id":83,"name":"Remove-Woocommerce-Checkout-fields-2025","desc":"<div>this section of code remove unnecessary fields on the checkout page<\/div>","code":"add_filter('woocommerce_checkout_fields', 'customize_checkout_fields_for_digital_products');\nfunction customize_checkout_fields_for_digital_products($fields) {\n    $has_virtual_or_downloadable = false;\n\n    \/\/ Check if cart has only virtual or downloadable products\n    foreach (WC()->cart->get_cart() as $item) {\n        $product = $item['data'];\n        if ($product->is_virtual() || $product->is_downloadable()) {\n            $has_virtual_or_downloadable = true;\n        } else {\n            $has_virtual_or_downloadable = false;\n            break;\n        }\n    }\n\n    if ($has_virtual_or_downloadable) {\n        \/\/ Remove unnecessary billing fields\n        unset($fields['billing']['billing_address_1']);\n        unset($fields['billing']['billing_address_2']);\n        unset($fields['billing']['billing_city']);\n        unset($fields['billing']['billing_state']);\n        unset($fields['billing']['billing_postcode']);\n        \/\/ Leave country and phone intact\n    }\n\n    return $fields;\n}\n\n\/\/ Remove order notes for virtual\/downloadable products\nadd_filter('woocommerce_enable_order_notes_field', 'disable_order_notes_for_digital');\nfunction disable_order_notes_for_digital($enabled) {\n    foreach (WC()->cart->get_cart() as $item) {\n        $product = $item['data'];\n        if ($product->is_virtual() || $product->is_downloadable()) {\n            return false;\n        }\n    }\n    return $enabled;\n}","active":true,"modified":"2025-06-07 22:49:41","revision":"7"},{"id":86,"name":"Hide-AI-User-Setting","desc":"<p>this hide the AI option in user profile<\/p>","code":"add_action('admin_footer', function () {\n    ?>\n    <script>\n    document.addEventListener(\"DOMContentLoaded\", function () {\n        \/\/ Target the <h2> element that says \"Elementor - AI\"\n        const elementorAiH2 = document.querySelector('tr th h2');\n        if (elementorAiH2 && elementorAiH2.textContent.trim() === 'Elementor - AI') {\n            elementorAiH2.textContent = ' ';\n        }\n\n        \/\/ Clear the table header associated with the label\n        const elementorAiTableHeader = document.querySelector('th:has(label[for=\"elementor_enable_ai\"])');\n        if (elementorAiTableHeader) {\n            elementorAiTableHeader.textContent = ' ';\n        }\n\n        \/\/ Clear the label text for \"Enable Elementor AI functionality\"\n        const elementorAiStatus = document.querySelector('label[for=\"elementor_enable_ai\"]');\n        if (elementorAiStatus) {\n            elementorAiStatus.textContent = ' ';\n        }\n    });\n    <\/script>\n    <?php\n});","active":true,"modified":"2025-06-08 11:41:00","revision":"4"},{"id":87,"name":"Add Empty Cart Button","desc":"<p>this section of code add empty cart on the cart page<\/p>","code":"\/\/ 1\ufe0f\u20e3 Add Empty Cart Button to Cart Page\nadd_action( 'woocommerce_after_cart_table', 'add_custom_empty_cart_button' );\nfunction add_custom_empty_cart_button() {\n    \/\/ Add nonce field for security\n    $nonce = wp_create_nonce('empty_cart_nonce');\n    echo '<button id=\"empty_cart_button\" class=\"button\" data-nonce=\"' . esc_attr($nonce) . '\" style=\"border-radius: 15px; background-color: #1950d1;\ncolor: white;\npadding:\u00a010px\u00a020px;\">Empty Cart<\/button>';\n}\n\n\/\/ 2\ufe0f\u20e3 Enqueue Inline JS Script on Cart Page\nadd_action( 'wp_footer', 'enqueue_empty_cart_script' );\nfunction enqueue_empty_cart_script() {\n    if ( is_cart() ) {\n        ?>\n        <script type=\"text\/javascript\">\n        jQuery(document).ready(function($){\n            $('#empty_cart_button').on('click', function(){\n                var nonce = $(this).data('nonce');\n                \n                $.ajax({\n                    url: '<?php echo esc_url( admin_url('admin-ajax.php') ); ?>',\n                    type: 'POST',\n                    data: {\n                        action: 'empty_cart',\n                        security: nonce\n                    },\n                    success: function(response) {\n                        location.reload(); \/\/ Reload cart page\n                    },\n                    error: function(xhr) {\n                        alert('Failed to clear cart. Please try again.');\n                    }\n                });\n            });\n        });\n        <\/script>\n        <?php\n    }\n}\n\n\/\/ 3\ufe0f\u20e3 Handle Ajax Request Securely\nadd_action( 'wp_ajax_empty_cart', 'handle_empty_cart' );\nadd_action( 'wp_ajax_nopriv_empty_cart', 'handle_empty_cart' );\n\nfunction handle_empty_cart() {\n    check_ajax_referer('empty_cart_nonce', 'security');\n\n    if ( WC()->cart ) {\n        WC()->cart->empty_cart();\n    }\n\n    wp_send_json_success(); \/\/ return success response\n    wp_die(); \/\/ Always end AJAX\n}","active":true,"modified":"2025-06-08 11:32:53","revision":"7"},{"id":91,"name":"User Registration","desc":"<p>sort users registration by date and time<\/p>","code":"\/*\n * Creating a column (it is also possible to remove some default ones)\n *\/\nadd_filter( 'manage_users_columns', 'rudr_modify_user_table' );\nfunction rudr_modify_user_table( $columns ) {\n\t\n\t\/\/ unset( $columns['posts'] ); \/\/ maybe you would like to remove default columns\n\t$columns[ 'registration_date' ] = 'Registration date'; \/\/ add new\n\treturn $columns;\n\n}\n\n\/*\n * Fill our new column with registration dates of the users\n *\/\nadd_filter( 'manage_users_custom_column', 'rudr_modify_user_table_row', 10, 3 );\nfunction rudr_modify_user_table_row( $row_output, $column_id_attr, $user ) {\n\t\n\t$date_format = 'j M, Y H:i';\n\n\tswitch( $column_id_attr ) {\n\t\tcase 'registration_date' : {\n\t\t\treturn date( $date_format, strtotime( get_the_author_meta( 'registered', $user ) ) );\n\t\t\tbreak;\n\t\t}\n\t\tdefault : {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn $row_output;\n\n}\n\n\/*\n * Make our \"Registration date\" column sortable\n *\/\nadd_filter( 'manage_users_sortable_columns', 'rudr_make_registered_column_sortable' );\nfunction rudr_make_registered_column_sortable( $columns ) {\n\t\n\treturn wp_parse_args( array( 'registration_date' => 'registered' ), $columns );\n\t\n}","active":true,"modified":"2025-07-25 09:42:27","revision":"4"}]}